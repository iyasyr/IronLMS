@startuml
title IronLMS - Class Diagram (cornered layout)

skinparam classAttributeIconSize 0
skinparam shadowing false
skinparam linetype ortho
skinparam package {
  BorderColor #B0B0B0
  BackgroundColor white     ' opaque so lines behind are hidden
}

' Hide enum members to keep boxes compact (optional)
hide <<enum>> members

left to right direction

' =======================
' Top-left: Auth & Users
' =======================
package "Auth & Users" as P_USERS {
  top to bottom direction

  abstract class User {
    Long id
    String email
    String passwordHash
    String fullName
    Role role
    Instant createdAt
  }

  class Student extends User {
    String studentNumber
  }

  class Instructor extends User {
    String bio
  }
}

' =========================
' Top-right: Learning Content
' =========================
package "Learning Content" as P_CONTENT {
  top to bottom direction

  class Course {
    Long id
    String title
    String description
    CourseStatus status
    Instant createdAt
    Instant publishedAt
  }

  class Lesson {
    Long id
    String title
    String contentUrl
    int orderIndex
  }

  class Assignment {
    Long id
    String title
    String instructions
    Instant dueAt
    int maxPoints
    boolean allowLate
  }
}

' =======================
' Bottom-right: Enroll & Assess
' =======================
package "Enrollment & Assessment" as P_ENROLL {
  top to bottom direction

  class Enrollment {
    Long id
    Instant enrolledAt
    EnrollmentStatus status
  }

  class Submission {
    Long id
    Instant submittedAt
    String artifactUrl
    SubmissionStatus status
    Integer score
    String feedback
    int version
  }
}

' =======================
' Bottom-left: Common (enums)
' =======================
package "Common" as P_COMMON {
  enum Role <<enum>> {
  ADMIN; INSTRUCTOR; STUDENT }
  enum CourseStatus <<enum>> {
  DRAFT; PUBLISHED; ARCHIVED }
  enum EnrollmentStatus <<enum>> {
  ACTIVE; CANCELLED; COMPLETED }
  enum SubmissionStatus <<enum>> {
  SUBMITTED; GRADED; RESUBMIT_REQUESTED }
}

' ----- Grid positioning (corner anchors) -----
P_USERS   -[hidden]->     P_CONTENT
P_COMMON  -[hidden]->     P_ENROLL
P_USERS   -[hidden]down-> P_COMMON
P_CONTENT -[hidden]down-> P_ENROLL

' ---------- Inheritance ----------
User <|-- Student
User <|-- Instructor

' ---------- Relationships (routed within rows/columns) ----------
Instructor "1" -right-> "0..*" Course : creates
Course "1" -down-> "0..*" Lesson : has
Course "1" -down-> "0..*" Assignment : contains

Student "1" -down-> "0..*" Enrollment : enrolls >
Enrollment "1" -right-> "1" Course : for     ' stays on bottom row

Assignment "1" -down-> "0..*" Submission : receives >
' Two options for author link; pick one:
Submission "1" -left-> "1" Student : authoredBy >    ' bottom row â†’ left
' Submission ..left..> Student : authoredBy          ' (alternative: dashed, lighter)

@enduml
